<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.shop.mapper.DataOrderGoodsMapper">
    
    <resultMap type="DataOrderGoods" id="DataOrderGoodsResult">
        <result property="orderGoodsId"    column="order_goods_id"    />
        <result property="goodsId"    column="goods_id"    />
        <result property="goodsName"    column="goods_name"    />
        <result property="imageId"    column="image_id"    />
        <result property="deductStockType"    column="deduct_stock_type"    />
        <result property="specType"    column="spec_type"    />
        <result property="specSkuId"    column="spec_sku_id"    />
        <result property="goodsSpecId"    column="goods_spec_id"    />
        <result property="goodsAttr"    column="goods_attr"    />
        <result property="content"    column="content"    />
        <result property="goodsNo"    column="goods_no"    />
        <result property="goodsPrice"    column="goods_price"    />
        <result property="linePrice"    column="line_price"    />
        <result property="goodsWeight"    column="goods_weight"    />
        <result property="totalNum"    column="total_num"    />
        <result property="totalPrice"    column="total_price"    />
        <result property="orderId"    column="order_id"    />
        <result property="userId"    column="user_id"    />
        <result property="wxappId"    column="wxapp_id"    />
        <result property="createTime"    column="create_time"    />
    </resultMap>

    <sql id="selectDataOrderGoodsVo">
        select order_goods_id, goods_id, goods_name, image_id, deduct_stock_type, spec_type, spec_sku_id, goods_spec_id, goods_attr, content, goods_no, goods_price, line_price, goods_weight, total_num, total_price, order_id, user_id, wxapp_id, create_time from data_order_goods
    </sql>

    <select id="selectDataOrderGoodsList" parameterType="DataOrderGoods" resultMap="DataOrderGoodsResult">
        <include refid="selectDataOrderGoodsVo"/>
        <where>  
            <if test="goodsId != null "> and goods_id = #{goodsId}</if>
            <if test="goodsName != null  and goodsName != ''"> and goods_name like concat('%', #{goodsName}, '%')</if>
            <if test="imageId != null "> and image_id = #{imageId}</if>
            <if test="deductStockType != null "> and deduct_stock_type = #{deductStockType}</if>
            <if test="specType != null "> and spec_type = #{specType}</if>
            <if test="specSkuId != null  and specSkuId != ''"> and spec_sku_id = #{specSkuId}</if>
            <if test="goodsSpecId != null "> and goods_spec_id = #{goodsSpecId}</if>
            <if test="goodsAttr != null  and goodsAttr != ''"> and goods_attr = #{goodsAttr}</if>
            <if test="content != null  and content != ''"> and content = #{content}</if>
            <if test="goodsNo != null  and goodsNo != ''"> and goods_no = #{goodsNo}</if>
            <if test="goodsPrice != null "> and goods_price = #{goodsPrice}</if>
            <if test="linePrice != null "> and line_price = #{linePrice}</if>
            <if test="goodsWeight != null "> and goods_weight = #{goodsWeight}</if>
            <if test="totalNum != null "> and total_num = #{totalNum}</if>
            <if test="totalPrice != null "> and total_price = #{totalPrice}</if>
            <if test="orderId != null "> and order_id = #{orderId}</if>
            <if test="userId != null "> and user_id = #{userId}</if>
            <if test="wxappId != null "> and wxapp_id = #{wxappId}</if>
        </where>
    </select>
    
    <select id="selectDataOrderGoodsById" parameterType="Long" resultMap="DataOrderGoodsResult">
        <include refid="selectDataOrderGoodsVo"/>
        where order_goods_id = #{orderGoodsId}
    </select>
        
    <insert id="insertDataOrderGoods" parameterType="DataOrderGoods" useGeneratedKeys="true" keyProperty="orderGoodsId">
        insert into data_order_goods
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="goodsId != null">goods_id,</if>
            <if test="goodsName != null and goodsName != ''">goods_name,</if>
            <if test="imageId != null">image_id,</if>
            <if test="deductStockType != null">deduct_stock_type,</if>
            <if test="specType != null">spec_type,</if>
            <if test="specSkuId != null and specSkuId != ''">spec_sku_id,</if>
            <if test="goodsSpecId != null">goods_spec_id,</if>
            <if test="goodsAttr != null and goodsAttr != ''">goods_attr,</if>
            <if test="content != null and content != ''">content,</if>
            <if test="goodsNo != null and goodsNo != ''">goods_no,</if>
            <if test="goodsPrice != null">goods_price,</if>
            <if test="linePrice != null">line_price,</if>
            <if test="goodsWeight != null">goods_weight,</if>
            <if test="totalNum != null">total_num,</if>
            <if test="totalPrice != null">total_price,</if>
            <if test="orderId != null">order_id,</if>
            <if test="userId != null">user_id,</if>
            <if test="wxappId != null">wxapp_id,</if>
            <if test="createTime != null">create_time,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="goodsId != null">#{goodsId},</if>
            <if test="goodsName != null and goodsName != ''">#{goodsName},</if>
            <if test="imageId != null">#{imageId},</if>
            <if test="deductStockType != null">#{deductStockType},</if>
            <if test="specType != null">#{specType},</if>
            <if test="specSkuId != null and specSkuId != ''">#{specSkuId},</if>
            <if test="goodsSpecId != null">#{goodsSpecId},</if>
            <if test="goodsAttr != null and goodsAttr != ''">#{goodsAttr},</if>
            <if test="content != null and content != ''">#{content},</if>
            <if test="goodsNo != null and goodsNo != ''">#{goodsNo},</if>
            <if test="goodsPrice != null">#{goodsPrice},</if>
            <if test="linePrice != null">#{linePrice},</if>
            <if test="goodsWeight != null">#{goodsWeight},</if>
            <if test="totalNum != null">#{totalNum},</if>
            <if test="totalPrice != null">#{totalPrice},</if>
            <if test="orderId != null">#{orderId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="wxappId != null">#{wxappId},</if>
            <if test="createTime != null">#{createTime},</if>
         </trim>
    </insert>

    <update id="updateDataOrderGoods" parameterType="DataOrderGoods">
        update data_order_goods
        <trim prefix="SET" suffixOverrides=",">
            <if test="goodsId != null">goods_id = #{goodsId},</if>
            <if test="goodsName != null and goodsName != ''">goods_name = #{goodsName},</if>
            <if test="imageId != null">image_id = #{imageId},</if>
            <if test="deductStockType != null">deduct_stock_type = #{deductStockType},</if>
            <if test="specType != null">spec_type = #{specType},</if>
            <if test="specSkuId != null and specSkuId != ''">spec_sku_id = #{specSkuId},</if>
            <if test="goodsSpecId != null">goods_spec_id = #{goodsSpecId},</if>
            <if test="goodsAttr != null and goodsAttr != ''">goods_attr = #{goodsAttr},</if>
            <if test="content != null and content != ''">content = #{content},</if>
            <if test="goodsNo != null and goodsNo != ''">goods_no = #{goodsNo},</if>
            <if test="goodsPrice != null">goods_price = #{goodsPrice},</if>
            <if test="linePrice != null">line_price = #{linePrice},</if>
            <if test="goodsWeight != null">goods_weight = #{goodsWeight},</if>
            <if test="totalNum != null">total_num = #{totalNum},</if>
            <if test="totalPrice != null">total_price = #{totalPrice},</if>
            <if test="orderId != null">order_id = #{orderId},</if>
            <if test="userId != null">user_id = #{userId},</if>
            <if test="wxappId != null">wxapp_id = #{wxappId},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
        </trim>
        where order_goods_id = #{orderGoodsId}
    </update>

    <delete id="deleteDataOrderGoodsById" parameterType="Long">
        delete from data_order_goods where order_goods_id = #{orderGoodsId}
    </delete>

    <delete id="deleteDataOrderGoodsByIds" parameterType="String">
        delete from data_order_goods where order_goods_id in 
        <foreach item="orderGoodsId" collection="array" open="(" separator="," close=")">
            #{orderGoodsId}
        </foreach>
    </delete>
    
</mapper>